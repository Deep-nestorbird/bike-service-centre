[
 {
  "breadcrumbs": null,
  "content_type": "HTML",
  "context_script": "",
  "css": "/* Add any additional styles for service items */\r\n.service_item {\r\n    margin: 20px;\r\n    padding: 20px;\r\n    border: 1px solid #ddd;\r\n    border-radius: 5px;\r\n    background-color: #f9f9f9;\r\n}\r\n\r\n.service_title {\r\n    font-size: 1.5em;\r\n    color: #333;\r\n}\r\n\r\n.service_description {\r\n    font-size: 1em;\r\n    color: #666;\r\n}\r\n\r\n.service_price {\r\n    font-size: 1em;\r\n    color: #888;\r\n}\r\n\r\n/* Existing styles */\r\n@import url('https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900&display=swap');\r\n*{\r\n    margin: 0;\r\n    padding: 0;\r\n    box-sizing: border-box;\r\n    font-family: \"Poppins\", sans-serif;\r\n}\r\n/* Navbar Styling */\r\n.navbar {\r\n    background-color: #333;\r\n    color: #fff;\r\n    padding: 10px 20px;\r\n    position: fixed;\r\n    width: 100%;\r\n    top: 0;\r\n    z-index: 1000;\r\n}\r\n.navbar-container {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    width: 100%;\r\n    margin: 0 auto;\r\n}\r\n.logo {\r\n    font-size: 1.5em;\r\n    font-weight: bold;\r\n    text-decoration: none;\r\n    color: #fff;\r\n}\r\n.nav-links {\r\n    list-style: none;\r\n    display: flex;\r\n    gap: 15px;\r\n}\r\n.nav-links li {\r\n    position: relative;\r\n}\r\n.nav-links a {\r\n    text-decoration: none;\r\n    color: #fff;\r\n    padding: 5px 10px;\r\n    transition: background-color 0.3s ease;\r\n}\r\n.nav-links a:hover {\r\n    background-color: #555;\r\n    border-radius: 5px;\r\n}\r\n.btn {\r\n    background-color: #FF5722;\r\n    color: #fff;\r\n    padding: 8px 15px;\r\n    border-radius: 5px;\r\n    transition: background-color 0.3s ease;\r\n}\r\n.btn:hover {\r\n    background-color: #E64A19;\r\n}\r\n.menu-toggle {\r\n    display: none;\r\n    flex-direction: column;\r\n    cursor: pointer;\r\n}\r\n.menu-toggle .bar {\r\n    height: 3px;\r\n    width: 25px;\r\n    background-color: #fff;\r\n    margin: 4px 0;\r\n    transition: all 0.3s ease;\r\n}\r\n.hero {\r\n    background-image: url('https://img.freepik.com/premium-photo/stylish-young-woman-motorcycle-rider-with-beautiful-eyes-black-protective-gear-fullface_141188-6599.jpg');\r\n    background-size: cover;\r\n    height: 450px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 100%;\r\n}\r\n.herotext {\r\n    color: #fff;\r\n    font-size: 40px;\r\n    text-align: center;\r\n}\r\n.hero_button {\r\n    width: 120px;\r\n    height: 40px;\r\n    background-color: #fb8500;\r\n    border: 0px;\r\n    border-radius: 6px;\r\n    color: #fff;\r\n    cursor: pointer;\r\n    transition: 0.2s all ease-in-out;\r\n}\r\n",
  "docstatus": 0,
  "doctype": "Web Page",
  "dynamic_route": 1,
  "dynamic_template": 1,
  "enable_comments": 0,
  "end_date": null,
  "full_width": 1,
  "header": null,
  "insert_style": 1,
  "javascript": null,
  "main_section": null,
  "main_section_html": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Navbar Example</title>\r\n    <link rel=\"stylesheet\" href=\"styles.css\">\r\n    <script>\r\n        document.addEventListener('DOMContentLoaded', function () {\r\n            // Function to handle the click event on the \"Book now\" button\r\n            function handleBookNowClick() {\r\n                window.open('http://localhost:8000/login_page', '_self');\r\n            }\r\n\r\n            // Find the \"Book now\" button element\r\n            const bookNowButton = document.querySelector('.hero_button');\r\n\r\n            // Add a click event listener to the \"Book now\" button\r\n            bookNowButton.addEventListener('click', handleBookNowClick);\r\n        });\r\n\r\n        async function fetchServiceData() {\r\n            try {\r\n                const response = await fetch('/api/resource/Service%20Type');\r\n                const data = await response.json();\r\n                return data.data;  // Assuming the response JSON has a 'data' field containing the records\r\n            } catch (error) {\r\n                console.error('Error fetching service data:', error);\r\n                return [];\r\n            }\r\n        }\r\n\r\n        function renderServiceData(serviceData) {\r\n            const servicesContainer = document.querySelector('.services');\r\n            servicesContainer.innerHTML = ''; // Clear existing content\r\n\r\n            serviceData.forEach(service => {\r\n                const serviceItem = document.createElement('div');\r\n                serviceItem.className = 'service_item';\r\n                \r\n                const serviceTitle = document.createElement('h3');\r\n                serviceTitle.className = 'service_title';\r\n                serviceTitle.textContent = service.name1;\r\n\r\n                const serviceDescription = document.createElement('p');\r\n                serviceDescription.className = 'service_description';\r\n                serviceDescription.textContent = service.description;\r\n\r\n                const servicePrice = document.createElement('p');\r\n                servicePrice.className = 'service_price';\r\n                servicePrice.textContent = `Price: ${service.price}`;\r\n\r\n                serviceItem.appendChild(serviceTitle);\r\n                serviceItem.appendChild(serviceDescription);\r\n                serviceItem.appendChild(servicePrice);\r\n                servicesContainer.appendChild(serviceItem);\r\n            });\r\n        }\r\n\r\n        document.addEventListener('DOMContentLoaded', async () => {\r\n            const serviceData = await fetchServiceData();\r\n            renderServiceData(serviceData);\r\n        });\r\n    </script>\r\n</head>\r\n<body>\r\n    <nav class=\"navbar\">\r\n        <div class=\"navbar-container\">\r\n            <a href=\"#\" class=\"logo\">Bike Service</a>\r\n            <ul class=\"nav-links\">\r\n                <li><a href=\"#home\">Home</a></li>\r\n                <li><a href=\"#services\">Services</a></li>\r\n                <li><a href=\"#about\">About Us</a></li>\r\n                <li><a href=\"#contact\">Contact</a></li>\r\n            </ul>\r\n        </div>\r\n    </nav>\r\n    <section class=\"hero\">\r\n        <h4 class=\"herotext\">\r\n            Live for the passion, live for the chance to ride bike.\r\n        </h4>\r\n        <button class=\"hero_button\">\r\n            Book now\r\n        </button>\r\n    </section>\r\n    <section>\r\n        <div>\r\n            Our Services\r\n        </div>\r\n        <div class=\"services\">\r\n            <!-- Service items will be dynamically inserted here -->\r\n        </div>\r\n    </section>\r\n</body>\r\n</html>\r\n",
  "main_section_md": null,
  "meta_description": null,
  "meta_image": null,
  "meta_title": null,
  "modified": "2024-06-10 10:34:37.517220",
  "module": "Bike Service Centre",
  "name": "homepage",
  "page_blocks": [],
  "published": 1,
  "route": "bike_service",
  "show_sidebar": 0,
  "show_title": 0,
  "slideshow": null,
  "start_date": null,
  "text_align": "Left",
  "title": "HomePage",
  "website_sidebar": null
 },
 {
  "breadcrumbs": null,
  "content_type": "HTML",
  "context_script": null,
  "css": "<style media=\"screen\">\r\n    *,\r\n    *:before,\r\n    *:after {\r\n      padding: 0;\r\n      margin: 0;\r\n      box-sizing: border-box;\r\n    }\r\n\r\n    body {\r\n      background-color: #080710;\r\n    }\r\n\r\n    .background {\r\n      width: 430px;\r\n      height: 500px;\r\n      position: absolute;\r\n      transform: translate(-50%, -50%);\r\n      left: 50%;\r\n      top: 50%;\r\n    }\r\n\r\n    .background .shape {\r\n      height: 200px;\r\n      width: 200px;\r\n      position: absolute;\r\n      border-radius: 50%;\r\n    }\r\n\r\n    .shape:first-child {\r\n      background: linear-gradient(#1845ad, #23a2f6);\r\n      left: -80px;\r\n      top: -80px;\r\n    }\r\n\r\n    .shape:last-child {\r\n      background: linear-gradient(to right, #ff512f, #f09819);\r\n      right: -30px;\r\n      bottom: -80px;\r\n    }\r\n\r\n    form {\r\n      height: 520px;\r\n      width: 400px;\r\n      background-color: rgba(255, 255, 255, 0.13);\r\n      position: absolute;\r\n      transform: translate(-50%, -50%);\r\n      top: 50%;\r\n      left: 50%;\r\n      border-radius: 10px;\r\n      backdrop-filter: blur(10px);\r\n      border: 2px solid rgba(255, 255, 255, 0.1);\r\n      box-shadow: 0 0 40px rgba(8, 7, 16, 0.6);\r\n      padding: 50px 35px;\r\n    }\r\n\r\n    form * {\r\n      font-family: 'Poppins', sans-serif;\r\n      color: #ffffff;\r\n      letter-spacing: 0.5px;\r\n      outline: none;\r\n      border: none;\r\n    }\r\n\r\n    form h3 {\r\n      font-size: 32px;\r\n      font-weight: 500;\r\n      line-height: 42px;\r\n      text-align: center;\r\n    }\r\n\r\n    label {\r\n      display: block;\r\n      margin-top: 30px;\r\n      font-size: 16px;\r\n      font-weight: 500;\r\n    }\r\n\r\n    input {\r\n      display: block;\r\n      height: 50px;\r\n      width: 100%;\r\n      background-color: rgba(255, 255, 255, 0.07);\r\n      border-radius: 3px;\r\n      padding: 0 10px;\r\n      margin-top: 8px;\r\n      font-size: 14px;\r\n      font-weight: 300;\r\n    }\r\n\r\n    ::placeholder {\r\n      color: #e5e5e5;\r\n    }\r\n\r\n    button {\r\n      margin-top: 50px;\r\n      width: 100%;\r\n      background-color: #808080;\r\n      color: #080710;\r\n      padding: 15px 0;\r\n      font-size: 18px;\r\n      font-weight: 600;\r\n      border-radius: 5px;\r\n      cursor: pointer;\r\n    }\r\n\r\n    .social {\r\n      margin-top: 30px;\r\n      display: flex;\r\n    }\r\n\r\n    .social div {\r\n      background: red;\r\n      width: 150px;\r\n      border-radius: 3px;\r\n      padding: 5px 10px 10px 5px;\r\n      background-color: rgba(255, 255, 255, 0.27);\r\n      color: #eaf0fb;\r\n      text-align: center;\r\n    }\r\n\r\n    .social div:hover {\r\n      background-color: rgba(255, 255, 255, 0.47);\r\n    }\r\n\r\n    .social .fb {\r\n      margin-left: 25px;\r\n    }\r\n\r\n    .social i {\r\n      margin-right: 4px;\r\n    }\r\n  </style>",
  "docstatus": 0,
  "doctype": "Web Page",
  "dynamic_route": 0,
  "dynamic_template": 0,
  "enable_comments": 0,
  "end_date": null,
  "full_width": 0,
  "header": null,
  "insert_style": 1,
  "javascript": "document.querySelector(\".navbar\").style.display = \"none\";\ndocument.querySelector(\"footer\").style.display = \"none\";\n",
  "main_section": null,
  "main_section_html": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Glassmorphism Login Form</title>\n  <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css\">\n  <link href=\"https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;600&display=swap\" rel=\"stylesheet\">\n  <style media=\"screen\">\n    /* Your CSS styles */\n  </style>\n  \n</head>\n<body>\n  <div class=\"background\">\n    <div class=\"shape\"></div>\n    <div class=\"shape\"></div>\n  </div>\n  <form id=\"login-form\" autocomplete=\"off\">\n    <h3>Login Here</h3>\n    <label for=\"username\">Username</label>\n    <input type=\"text\" placeholder=\"Email or Phone\" id=\"username\" autocomplete=\"off\" required>\n    <label for=\"password\">Password</label>\n    <input type=\"password\" placeholder=\"Password\" id=\"password\" autocomplete=\"off\" required>\n    <button type=\"submit\">Log In</button>\n    <p>Don't have an account? <a href=\"http://localhost:8000/signup_page\" id=\"signup-link\">Sign Up</a></p>\n  </form>\n\n  <script>\n  function clearInputs() {\n    console.log(\"Clearing input fields\"); // Debugging statement\n    document.getElementById('username').value = \"\";\n    document.getElementById('password').value = \"\";\n  }\n\n  document.addEventListener('DOMContentLoaded', function() {\n    clearInputs();\n  });\n\n  document.getElementById('login-form').addEventListener('submit', function(event) {\n    event.preventDefault();\n    console.log(\"Form submitted\"); // Debugging statement\n\n    var username = document.getElementById('username').value;\n    var password = document.getElementById('password').value;\n\n    fetch(\"/api/method/login\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json;charset=UTF-8\"\n      },\n      body: JSON.stringify({\n        usr: username,\n        pwd: password\n      })\n    })\n    .then(response => {\n      if (response.ok) {\n        return response.json();\n      } else {\n        throw new Error('Network response was not ok.');\n      }\n    })\n    .then(data => {\n      if (data.message === \"Logged In\") {\n        // Clear input fields\n        clearInputs();\n\n        // Redirect based on the username\n        if (username.toLowerCase() === \"administrator\") {\n          window.location.href = \"http://localhost:8000/admin_page\";\n        } else {\n          window.location.href = \"http://localhost:8000/Customer_page\";\n        }\n      } else {\n        throw new Error('Invalid username or password.');\n      }\n    })\n    .catch(error => {\n      alert(\"An error occurred: \" + error.message);\n    });\n  });\n</script>\n</body>\n</html>",
  "main_section_md": null,
  "meta_description": null,
  "meta_image": null,
  "meta_title": null,
  "modified": "2024-06-10 10:16:27.277034",
  "module": null,
  "name": "login-page",
  "page_blocks": [],
  "published": 1,
  "route": "login_page",
  "show_sidebar": 0,
  "show_title": 0,
  "slideshow": null,
  "start_date": null,
  "text_align": "Left",
  "title": "Login Page",
  "website_sidebar": null
 },
 {
  "breadcrumbs": null,
  "content_type": "HTML",
  "context_script": null,
  "css": null,
  "docstatus": 0,
  "doctype": "Web Page",
  "dynamic_route": 0,
  "dynamic_template": 0,
  "enable_comments": 0,
  "end_date": null,
  "full_width": 1,
  "header": null,
  "insert_style": 0,
  "javascript": "document.querySelector(\".navbar\").style.display = \"none\";\ndocument.querySelector(\"footer\").style.display = \"none\";\n",
  "main_section": null,
  "main_section_html": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n  <title>Glassmorphism Sign Up Form Tutorial in HTML CSS</title>\r\n  <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\">\r\n  <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css\">\r\n  <link href=\"https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;600&display=swap\" rel=\"stylesheet\">\r\n  <style media=\"screen\">\r\n      *,\r\n      *:before,\r\n      *:after{\r\n          padding: 0;\r\n          margin: 0;\r\n          box-sizing: border-box;\r\n      }\r\n      body{\r\n          background-color: #080710;\r\n      }\r\n      .background{\r\n          width: 430px;\r\n          height: 500px;\r\n          position: absolute;\r\n          transform: translate(-50%,-50%);\r\n          left: 50%;\r\n          top: 50%;\r\n      }\r\n      .background .shape{\r\n          height: 200px;\r\n          width: 200px;\r\n          position: absolute;\r\n          border-radius: 50%;\r\n      }\r\n      .shape:first-child{\r\n          background: linear-gradient(#1845ad, #23a2f6);\r\n          left: -80px;\r\n          top: -80px;\r\n      }\r\n      .shape:last-child{\r\n          background: linear-gradient(to right, #ff512f, #f09819);\r\n          right: -120px;\r\n          bottom: -200px;\r\n      }\r\n      form{\r\n          height:700px;\r\n          width: 400px;\r\n          background-color: rgba(255,255,255,0.13);\r\n          position: absolute;\r\n          transform: translate(-50%,-50%);\r\n          top: 50%;\r\n          left: 50%;\r\n          border-radius: 10px;\r\n          backdrop-filter: blur(10px);\r\n          border: 2px solid rgba(255,255,255,0.1);\r\n          box-shadow: 0 0 40px rgba(8,7,16,0.6);\r\n          padding: 50px 35px;\r\n      }\r\n      form *{\r\n          font-family: 'Poppins',sans-serif;\r\n          color: #ffffff;\r\n          letter-spacing: 0.5px;\r\n          outline: none;\r\n          border: none;\r\n      }\r\n      form h3{\r\n          font-size: 32px;\r\n          font-weight: 500;\r\n          line-height: 42px;\r\n          text-align: center;\r\n      }\r\n      label{\r\n          display: block;\r\n          margin-top: 20px;\r\n          font-size: 16px;\r\n          font-weight: 500;\r\n      }\r\n      input{\r\n          display: block;\r\n          height: 50px;\r\n          width: 100%;\r\n          background-color: rgba(255,255,255,0.07);\r\n          border-radius: 3px;\r\n          padding: 0 10px;\r\n          margin-top: 8px;\r\n          font-size: 14px;\r\n          font-weight: 300;\r\n      }\r\n      ::placeholder{\r\n          color: #e5e5e5;\r\n      }\r\n      button{\r\n          margin-top: 50px;\r\n          width: 100%;\r\n          background-color: #808080;\r\n          color: #080710;\r\n          padding: 15px 0;\r\n          font-size: 18px;\r\n          font-weight: 600;\r\n          border-radius: 5px;\r\n          cursor: pointer;\r\n      }\r\n      .social{\r\n          margin-top: 30px;\r\n          display: flex;\r\n      }\r\n      .social div{\r\n          background: red;\r\n          width: 150px;\r\n          border-radius: 3px;\r\n          padding: 5px 10px 10px 5px;\r\n          background-color: rgba(255,255,255,0.27);\r\n          color: #eaf0fb;\r\n          text-align: center;\r\n      }\r\n      .social div:hover{\r\n          background-color: rgba(255,255,255,0.47);\r\n      }\r\n      .social .fb{\r\n          margin-left: 25px;\r\n      }\r\n      .social i{\r\n          margin-right: 4px;\r\n      }\r\n  </style>\r\n</head>\r\n<body>\r\n    <div class=\"background\">\r\n        <div class=\"shape\"></div>\r\n        <div class=\"shape\"></div>\r\n    </div>\r\n    <form id=\"signup-form\">\r\n        <h3>Sign Up</h3>\r\n\r\n        <label for=\"name\">Name</label>\r\n        <input type=\"text\" placeholder=\"Enter Your Name Here\" id=\"name\" required>\r\n        \r\n        <label for=\"contact\">Contact No.</label>\r\n        <input type=\"text\" placeholder=\"Enter Your Contact No.\" id=\"contact\" required>\r\n        \r\n        <label for=\"email\">Email</label>\r\n        <input type=\"email\" placeholder=\"Enter Your Email\" id=\"email\" required>\r\n        \r\n        <label for=\"address\">Address</label>\r\n        <input type=\"text\" placeholder=\"Enter Your Address\" id=\"address\" required>\r\n\r\n        <button type=\"submit\">Sign Up</button>\r\n        <p>Already have an account? <a href=\"http://localhost:8000/login_page?\" id=\"login-link\">Log In</a></p>\r\n    </form>\r\n    <script>\r\n document.getElementById('signup-form').addEventListener('submit', function(event) {\r\n  event.preventDefault();\r\n\r\n  var name = document.getElementById('name').value;\r\n  var contact = document.getElementById('contact').value;\r\n  var email = document.getElementById('email').value;\r\n  var address = document.getElementById('address').value;\r\n\r\n  // Check if email already exists in Customers doctype\r\n  fetch(`/api/resource/Customers?filters=[[\"email_address\",\"=\",\"${email}\"]]`, {\r\n    method: 'GET',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json',\r\n      'X-Frappe-CSRF-Token': frappe.csrf_token\r\n    }\r\n  })\r\n  .then(response => response.json())\r\n  .then(data => {\r\n    console.log(\"Customer data:\", data);\r\n    if (data.data && data.data.length > 0) {\r\n      alert(\"Email already exists\");\r\n    } else {\r\n      // Create new document in Customers doctype if email doesn't exist\r\n      fetch('/api/resource/Customers', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json',\r\n          'X-Frappe-CSRF-Token': frappe.csrf_token\r\n        },\r\n        body: JSON.stringify({\r\n          \"name1\": name,\r\n          \"contact_no\": contact,\r\n          \"email_address\": email,\r\n          \"address\": address\r\n        })\r\n      })\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        console.log(\"Customer creation response:\", data);\r\n        if (data.data) {\r\n          // If customer creation is successful, create user document\r\n          fetch('/api/resource/User', {\r\n            method: 'POST',\r\n            headers: {\r\n              'Accept': 'application/json',\r\n              'Content-Type': 'application/json',\r\n              'X-Frappe-CSRF-Token': frappe.csrf_token\r\n            },\r\n            body: JSON.stringify({\r\n              \"first_name\": name,\r\n              \"email\": email,\r\n              \"enabled\": 1,\r\n              \"new_password\": Math.random().toString(36).slice(-8) // Random password generation\r\n            })\r\n          })\r\n          .then(response => response.json())\r\n          .then(user_data => {\r\n            console.log(\"User creation response:\", user_data);\r\n            if (user_data.data) {\r\n              alert(\"Sign up successful\");\r\n            } else {\r\n              alert(\"User creation failed: \" + (user_data.message || \"Unknown error\"));\r\n            }\r\n          })\r\n          .catch(error => {\r\n            console.error(\"Error occurred during User API request:\", error);\r\n            alert(\"User creation failed: \" + error.message);\r\n          });\r\n        } else {\r\n          alert(\"Customer creation failed: \" + (data.message || \"Unknown error\"));\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.error(\"Error occurred during Customers API request:\", error);\r\n        alert(\"Sign up failed: \" + error.message);\r\n      });\r\n    }\r\n  })\r\n  .catch(error => {\r\n    console.error(\"Error occurred during Customers API request:\", error);\r\n    alert(\"Sign up failed: \" + error.message);\r\n  });\r\n});\r\n    </script>\r\n</body>\r\n</html>\r\n",
  "main_section_md": null,
  "meta_description": null,
  "meta_image": null,
  "meta_title": null,
  "modified": "2024-06-08 12:22:50.668689",
  "module": null,
  "name": "signup-page",
  "page_blocks": [],
  "published": 1,
  "route": "signup_page",
  "show_sidebar": 0,
  "show_title": 0,
  "slideshow": null,
  "start_date": null,
  "text_align": "Left",
  "title": "signup_page",
  "website_sidebar": null
 },
 {
  "breadcrumbs": null,
  "content_type": "HTML",
  "context_script": "",
  "css": "<style>\r\n        body {\r\n            font-family: Arial, sans-serif;\r\n            background-color: #f4f4f4;\r\n            margin: 0;\r\n            padding: 0;\r\n        }\r\n\r\n        header {\r\n            background-color: #333;\r\n            color: #fff;\r\n            padding: 1em 0;\r\n            text-align: center;\r\n            position: relative;\r\n        }\r\n\r\n        main {\r\n            padding: 2em;\r\n        }\r\n\r\n        h1, h2, h3 {\r\n            margin: 0.5em 0;\r\n        }\r\n\r\n        table {\r\n            width: 100%;\r\n            border-collapse: collapse;\r\n            margin-top: 1em;\r\n        }\r\n\r\n        table, th, td {\r\n            border: 1px solid #ccc;\r\n        }\r\n\r\n        th, td {\r\n            padding: 0.5em;\r\n            text-align: left;\r\n        }\r\n\r\n        button {\r\n            padding: 0.7em 1.5em;\r\n            background: #333;\r\n            color: #fff;\r\n            border: none;\r\n            border-radius: 3px;\r\n            cursor: pointer;\r\n            margin-top: 1em;\r\n        }\r\n\r\n        .popup {\r\n            display: none;\r\n            position: fixed;\r\n            left: 50%;\r\n            top: 50%;\r\n            transform: translate(-50%, -50%);\r\n            background-color: #fff;\r\n            padding: 2em;\r\n            border-radius: 5px;\r\n            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\r\n        }\r\n\r\n        .popup input,\r\n        .popup select {\r\n            width: 100%;\r\n            margin-bottom: 1em;\r\n            padding: 0.5em;\r\n            border: 1px solid #ccc;\r\n            border-radius: 3px;\r\n        }\r\n\r\n        .popup button {\r\n            padding: 0.7em 1.5em;\r\n            background: #333;\r\n            color: #fff;\r\n            border: none;\r\n            border-radius: 3px;\r\n            cursor: pointer;\r\n        }\r\n\r\n        .logout-button {\r\n            position: absolute;\r\n            right: 1em;\r\n            top: 1em;\r\n            background-color: #ff4d4d;\r\n        }\r\n    </style>",
  "docstatus": 0,
  "doctype": "Web Page",
  "dynamic_route": 0,
  "dynamic_template": 0,
  "enable_comments": 0,
  "end_date": null,
  "full_width": 1,
  "header": null,
  "insert_style": 1,
  "javascript": "document.querySelector(\".navbar\").style.display = \"none\";\ndocument.querySelector(\"footer\").style.display = \"none\";\n",
  "main_section": null,
  "main_section_html": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Customer Portal</title>\r\n    <style>\r\n        body {\r\n            font-family: Arial, sans-serif;\r\n            background-color: #f4f4f4;\r\n            margin: 0;\r\n            padding: 0;\r\n        }\r\n\r\n        header {\r\n            background-color: #333;\r\n            color: #fff;\r\n            padding: 1em 0;\r\n            text-align: center;\r\n            position: relative;\r\n        }\r\n\r\n        main {\r\n            padding: 2em;\r\n        }\r\n\r\n        h1, h2, h3 {\r\n            margin: 0.5em 0;\r\n        }\r\n\r\n        table {\r\n            width: 100%;\r\n            border-collapse: collapse;\r\n            margin-top: 1em;\r\n        }\r\n\r\n        table, th, td {\r\n            border: 1px solid #ccc;\r\n        }\r\n\r\n        th, td {\r\n            padding: 0.5em;\r\n            text-align: left;\r\n        }\r\n\r\n        button {\r\n            padding: 0.7em 1.5em;\r\n            background: #333;\r\n            color: #fff;\r\n            border: none;\r\n            border-radius: 3px;\r\n            cursor: pointer;\r\n            margin-top: 1em;\r\n        }\r\n\r\n        .popup {\r\n            display: none;\r\n            position: fixed;\r\n            left: 50%;\r\n            top: 50%;\r\n            transform: translate(-50%, -50%);\r\n            background-color: #fff;\r\n            padding: 2em;\r\n            border-radius: 5px;\r\n            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\r\n        }\r\n\r\n        .popup input,\r\n        .popup select {\r\n            width: 100%;\r\n            margin-bottom: 1em;\r\n            padding: 0.5em;\r\n            border: 1px solid #ccc;\r\n            border-radius: 3px;\r\n        }\r\n\r\n        .popup button {\r\n            padding: 0.7em 1.5em;\r\n            background: #333;\r\n            color: #fff;\r\n            border: none;\r\n            border-radius: 3px;\r\n            cursor: pointer;\r\n        }\r\n\r\n        .logout-button {\r\n            position: absolute;\r\n            right: 1em;\r\n            top: 1em;\r\n            background-color: #ff4d4d;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <header>\r\n        <h1 id=\"user-greeting\">Customer Portal</h1>\r\n        <button class=\"logout-button\" id=\"logout-button\">Logout</button>\r\n    </header>\r\n    <main>\r\n        <section id=\"dashboard-section\">\r\n            <h2>Dashboard</h2>\r\n            <div id=\"services\">\r\n                <h3>Past Services</h3>\r\n                <table id=\"past-services-table\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Service Date</th>\r\n                            <th>Bike Model</th>\r\n                            <th>Service Type</th>\r\n                            <th>Technician Name</th>\r\n                            <th>Status</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody id=\"past-services-table-body\">\r\n                        <!-- Past services will be loaded here -->\r\n                    </tbody>\r\n                </table>\r\n                <h3>Upcoming Services</h3>\r\n                <table id=\"upcoming-services-table\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Service Date</th>\r\n                            <th>Bike Model</th>\r\n                            <th>Service Type</th>\r\n                            <th>Technician Name</th>\r\n                            <th>Status</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody id=\"upcoming-services-table-body\">\r\n                        <!-- Upcoming services will be loaded here -->\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <button id=\"open-booking-popup\">Create Booking</button>\r\n            <div id=\"booking-popup\" class=\"popup\">\r\n                <h2>Book a Service</h2>\r\n                <form id=\"booking-form\">\r\n                    <label for=\"bike-model\">Bike Model:</label>\r\n                    <input type=\"text\" id=\"bike-model\" name=\"bike-model\" required>\r\n                    <label for=\"bike-brand\">Bike Brand:</label>\r\n                    <input type=\"text\" id=\"bike-brand\" name=\"bike-brand\" required>\r\n                    <label for=\"bike-year\">Bike Year:</label>\r\n                    <input type=\"number\" id=\"bike-year\" name=\"bike-year\" required>\r\n                    <label for=\"service-type\">Service Type:</label>\r\n                    <select id=\"service-type\" name=\"service-type\" required>\r\n                        <option value=\"Oil Change\">Oil Change</option>\r\n                        <option value=\"Brake Check\">Brake Check</option>\r\n                        <!-- Add more service types here -->\r\n                    </select>\r\n                    <label for=\"service-date\">Preferred Date and Time:</label>\r\n                    <input type=\"datetime-local\" id=\"service-date\" name=\"service-date\" required>\r\n                    <button type=\"submit\">Book Service</button>\r\n                </form>\r\n            </div>\r\n        </section>\r\n    </main>\r\n    <script>\r\n       document.addEventListener('DOMContentLoaded', function() {\r\n    // Function to check if a date is today or in the future\r\n    function isFutureDate(dateString) {\r\n        const today = new Date();\r\n        const serviceDate = new Date(dateString);\r\n        return serviceDate >= today;\r\n    }\r\n\r\n    // Function to format the date as dd/mm/yyyy\r\n    function formatDate(dateString) {\r\n        const date = new Date(dateString);\r\n        const day = date.getDate().toString().padStart(2, '0');\r\n        const month = (date.getMonth() + 1).toString().padStart(2, '0'); // Months are zero-based\r\n        const year = date.getFullYear();\r\n        return `${day}/${month}/${year}`;\r\n    }\r\n\r\n    // Function to fetch technician names for upcoming services\r\n    function fetchTechnicianNamesForServices(upcomingServices) {\r\n        upcomingServices.forEach(booking => {\r\n            const bookingId = booking.name; // Assuming the booking ID is stored in the 'name' field\r\n    //console.log(technician_id);            \r\n    console.log(bookingId);            \r\n    //console.log(technician_id);\r\n            // Fetch Service Report data based on the booking ID\r\n            fetch(`http://localhost:8000/api/resource/Service%20Report?fields=[\"technician_id\"]&filters=[[\"Service%20Report\",\"service_booking_id\",\"=\",\"${bookingId}\"]]`)\r\n                .then(response => response.json())\r\n                .then(serviceReportData => {\r\n                    if (serviceReportData.data && serviceReportData.data.length > 0) {\r\n                        const technicianId = serviceReportData.data[0].technician_id;\r\n                        // Now fetch technician details based on technician ID\r\n                        fetch(`http://localhost:8000/api/resource/Technician/${technicianId}`)\r\n                            .then(response => response.json())\r\n                            .then(technicianData => {\r\n                                if (technicianData.data && technicianData.data.technician_name) {\r\n                                    const technicianName = technicianData.data.technician_name;\r\n                                    // Update the UI with the technician name\r\n                                    updateTechnicianName(bookingId, technicianName);\r\n                                } else {\r\n                                    console.error('Technician name not found for booking:', bookingId);\r\n                                }\r\n                            })\r\n                            .catch(error => {\r\n                                console.error('Error fetching technician details:', error);\r\n                            });\r\n                    } else {\r\n                        console.error('Service Report not found for booking:', bookingId);\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    console.error('Error fetching Service Report:', error);\r\n                });\r\n        });\r\n    }\r\n\r\n    // Function to update the UI with the technician name\r\n    function updateTechnicianName(bookingId, technicianName) {\r\n        const bookingRow = document.querySelector(`[data-booking-id=\"${bookingId}\"]`);\r\n        if (bookingRow) {\r\n            const technicianCell = bookingRow.querySelector('.technician-name');\r\n            if (technicianCell) {\r\n                technicianCell.textContent = technicianName;\r\n            } else {\r\n                console.error('Technician name cell not found for booking:', bookingId);\r\n            }\r\n        } else {\r\n            console.error('Booking row not found:', bookingId);\r\n        }\r\n    }\r\n\r\n    // Fetch the session data from Frappe\r\n    fetch('http://localhost:8000/api/method/frappe.auth.get_logged_user')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            if (data.message) {\r\n                const userEmail = data.message;\r\n\r\n                // Fetch user details using the email\r\n                fetch(`http://localhost:8000/api/resource/User/${userEmail}`)\r\n                    .then(response => response.json())\r\n                    .then(userData => {\r\n                        if (userData && userData.data && userData.data.first_name) {\r\n                            const firstName = userData.data.first_name;\r\n                            // Update the greeting in the navbar\r\n                            document.getElementById('user-greeting').textContent = `Welcome, ${firstName}!`;\r\n                        } else {\r\n                            console.error('First name not found in user data');\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        console.error('Error fetching user details:', error);\r\n                    });\r\n\r\n                // Fetch service bookings associated with the user\r\n                fetch(`http://localhost:8000/api/resource/Service_booking?fields=[\"name\",\"service_date\",\"bike_id\",\"service_type\",\"status\"]&filters=[[\"Service_booking\",\"customer_id\",\"=\",\"${userEmail}\"]]`)\r\n                    .then(response => response.json())\r\n                    .then(serviceBookingsData => {\r\n                        // Extracting service bookings data from the response\r\n                        const serviceBookings = serviceBookingsData.data;\r\n\r\n                        // Separate upcoming and past service bookings\r\n                        const upcomingServices = [];\r\n                        const pastServices = [];\r\n\r\n                        serviceBookings.forEach(booking => {\r\n                            if (isFutureDate(booking.service_date)) {\r\n                                upcomingServices.push(booking);\r\n                            } else {\r\n                                pastServices.push(booking);\r\n                            }\r\n                        });\r\n\r\n                        // Update the UI with the separated service bookings\r\n                        updateServiceTable(upcomingServices, 'upcoming-services-table-body');\r\n                        updateServiceTable(pastServices, 'past-services-table-body');\r\n\r\n                        // Now fetch technician names for upcoming services\r\n                        fetchTechnicianNamesForServices(upcomingServices);\r\n                    })\r\n                    .catch(error => {\r\n                        console.error('Error fetching service bookings:', error);\r\n                    });\r\n            } else {\r\n                console.error('No logged user found');\r\n            }\r\n        })\r\n        .catch(error => {\r\n            console.error('Error fetching session data:', error);\r\n        });\r\n\r\n    // Function to update the service table with the provided data\r\n    function updateServiceTable(serviceBookings, tableBodyId) {\r\n        const tableBody = document.getElementById(tableBodyId);\r\n        tableBody.innerHTML = ''; // Clear existing data\r\n\r\n        serviceBookings.forEach(booking => {\r\n            const row = document.createElement('tr');\r\n            // Format the date as dd/mm/yyyy\r\n            const formattedDate = formatDate(booking.service_date);\r\n            row.innerHTML = `\r\n                <td>${formattedDate}</td>\r\n                <td>${booking.bike_id}</td>\r\n                <td>${booking.service_type}</td>\r\n                <td class=\"technician-name\"></td>\r\n                <td>${booking.status}</td>\r\n            `;\r\n            row.setAttribute('data-booking-id', booking.name);\r\n            tableBody.appendChild(row);\r\n        });\r\n    }\r\n\r\n    const bookingPopup = document.getElementById('booking-popup');\r\n    const openBookingPopupButton = document.getElementById('open-booking-popup');\r\n    const bookingForm = document.getElementById('booking-form');\r\n\r\n    openBookingPopupButton.addEventListener('click', function() {\r\n        bookingPopup.style.display = 'block';\r\n    });\r\n\r\n    bookingForm.addEventListener('submit', function(event) {\r\n        event.preventDefault();\r\n        // Handle form submission to create a new booking\r\n        bookingPopup.style.display = 'none';\r\n        alert('Booking created successfully!');\r\n    });\r\n\r\n    const logoutButton = document.getElementById('logout-button');\r\n    logoutButton.addEventListener('click', function() {\r\n        console.log('Logout button clicked');\r\n        fetch('/api/method/logout', {\r\n            method: 'GET', // Change method to GET as Frappe usually supports GET for logout\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        })\r\n        .then(response => {\r\n            console.log('Logout response:', response);\r\n            if (response.ok) {\r\n                window.location.href = 'http://localhost:8000/login_page';\r\n            } else {\r\n                console.error('Failed to log out');\r\n            }\r\n        })\r\n        .catch(error => {\r\n            console.error('Error during logout:', error);\r\n        });\r\n    });\r\n});\r\n</script>\r\n</body>\r\n</html>\r\n",
  "main_section_md": null,
  "meta_description": null,
  "meta_image": null,
  "meta_title": null,
  "modified": "2024-06-10 08:50:46.692692",
  "module": null,
  "name": "customer-page",
  "page_blocks": [],
  "published": 1,
  "route": "Customer_page",
  "show_sidebar": 0,
  "show_title": 0,
  "slideshow": null,
  "start_date": null,
  "text_align": "Left",
  "title": "Customer Page",
  "website_sidebar": null
 },
 {
  "breadcrumbs": null,
  "content_type": "HTML",
  "context_script": null,
  "css": "\r\n    body {\r\n      font-family: Arial, sans-serif;\r\n      background-color: #f4f4f4;\r\n      margin: 0;\r\n      padding: 0;\r\n    }\r\n    header {\r\n      background-color: #333;\r\n      color: #fff;\r\n      padding: 1em 0;\r\n      text-align: center;\r\n    }\r\n    nav {\r\n      background-color: #444;\r\n      color: #fff;\r\n      padding: 0.5em;\r\n      text-align: center;\r\n    }\r\n    nav a, nav button, nav select {\r\n      text-decoration: none;\r\n      margin: 0 1em;\r\n      background-color: #444;\r\n      border: none;\r\n      color: white;\r\n      padding: 0.5em;\r\n      cursor: pointer;\r\n    }\r\n    nav select {\r\n      -webkit-appearance: none;  /* Remove default arrow in Webkit browsers */\r\n      -moz-appearance: none;     /* Remove default arrow in Firefox */\r\n      appearance: none;          /* Remove default arrow in modern browsers */\r\n      padding: 0.5em;            /* Add padding for better appearance */\r\n    }\r\n    main {\r\n      padding: 2em;\r\n    }\r\n    h1 {\r\n      margin-bottom: 1em;\r\n    }\r\n    .dashboard-item {\r\n      background-color: #fff;\r\n      padding: 1em;\r\n      margin-bottom: 1em;\r\n      border-radius: 5px;\r\n      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n    }\r\n    .dashboard-item h2 {\r\n      margin-bottom: 0.5em;\r\n    }\r\n    table {\r\n      width: 100%;\r\n      border-collapse: collapse;\r\n    }\r\n    th, td {\r\n      padding: 0.5em;\r\n      border: 1px solid #ccc;\r\n      text-align: left;\r\n    }\r\n  ",
  "docstatus": 0,
  "doctype": "Web Page",
  "dynamic_route": 0,
  "dynamic_template": 0,
  "enable_comments": 0,
  "end_date": null,
  "full_width": 1,
  "header": null,
  "insert_style": 1,
  "javascript": "document.querySelector(\".navbar\").style.display = \"none\";\ndocument.querySelector(\"footer\").style.display = \"none\";\n",
  "main_section": null,
  "main_section_html": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n  <title>Admin Panel</title>\r\n  <style>\r\n    body {\r\n      font-family: Arial, sans-serif;\r\n      background-color: #f4f4f4;\r\n      margin: 0;\r\n      padding: 0;\r\n    }\r\n    header {\r\n      background-color: #333;\r\n      color: #fff;\r\n      padding: 1em 0;\r\n      text-align: center;\r\n    }\r\n    nav {\r\n      background-color: #444;\r\n      color: #fff;\r\n      padding: 0.5em;\r\n      text-align: center;\r\n    }\r\n    nav a, nav button, nav select {\r\n      text-decoration: none;\r\n      margin: 0 1em;\r\n      background-color: #444;\r\n      border: none;\r\n      color: white;\r\n      padding: 0.5em;\r\n      cursor: pointer;\r\n    }\r\n    nav select {\r\n      -webkit-appearance: none;  /* Remove default arrow in Webkit browsers */\r\n      -moz-appearance: none;     /* Remove default arrow in Firefox */\r\n      appearance: none;          /* Remove default arrow in modern browsers */\r\n      padding: 0.5em;            /* Add padding for better appearance */\r\n    }\r\n    main {\r\n      padding: 2em;\r\n    }\r\n    h1 {\r\n      margin-bottom: 1em;\r\n    }\r\n    .dashboard-item {\r\n      background-color: #fff;\r\n      padding: 1em;\r\n      margin-bottom: 1em;\r\n      border-radius: 5px;\r\n      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n    }\r\n    .dashboard-item h2 {\r\n      margin-bottom: 0.5em;\r\n    }\r\n    table {\r\n      width: 100%;\r\n      border-collapse: collapse;\r\n    }\r\n    th, td {\r\n      padding: 0.5em;\r\n      border: 1px solid #ccc;\r\n      text-align: left;\r\n    }\r\n  </style>\r\n  <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js\"></script>\r\n</head>\r\n<body>\r\n  <header>\r\n    <h1>Admin Panel</h1>\r\n    <h1 id=\"user-greeting\">Welcome, </h1>\r\n  </header>\r\n  <nav>\r\n    <a href=\"#\">Dashboard</a>\r\n    <a href=\"#\">Manage Bookings</a>\r\n    <a href=\"#\">Manage DocTypes</a>\r\n    <select id=\"generate-reports-dropdown\">\r\n      <option value=\"\">Generate Reports</option>\r\n      <option value=\"technician-performance\">Technician Performance Report</option>\r\n      <option value=\"customer-service\">Customer Service Report</option>\r\n      <option value=\"monthly-revenue\">Monthly Revenue Report</option>\r\n      <option value=\"daily-service\">Daily Service Report</option>\r\n    </select>\r\n    <button id=\"logout-button\">Logout</button>\r\n  </nav>\r\n  <main>\r\n    <section class=\"dashboard-item\">\r\n      <h2>Today's Bookings</h2>\r\n      <table id=\"today-bookings-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>Booking ID</th>\r\n            <th>Customer ID</th>\r\n            <th>Bike ID</th>\r\n            <th>Service Type</th>\r\n            <th>Service Date</th>\r\n            <th>Status</th>\r\n            <th>Total Cost</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody id=\"today-bookings-body\">\r\n        </tbody>\r\n      </table>\r\n    </section>\r\n    <section class=\"dashboard-item\">\r\n      <h2>Pending Services</h2>\r\n      <table id=\"pending-services-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>Booking ID</th>\r\n            <th>Customer ID</th>\r\n            <th>Bike ID</th>\r\n            <th>Service Type</th>\r\n            <th>Service Date</th>\r\n            <th>Status</th>\r\n            <th>Total Cost</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody id=\"pending-services-body\">\r\n        </tbody>\r\n      </table>\r\n    </section>\r\n    <section class=\"dashboard-item\">\r\n      <h2>Completed Services</h2>\r\n      <table id=\"completed-services-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>Booking ID</th>\r\n            <th>Customer ID</th>\r\n            <th>Bike ID</th>\r\n            <th>Service Type</th>\r\n            <th>Service Date</th>\r\n            <th>Status</th>\r\n            <th>Total Cost</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody id=\"completed-services-body\">\r\n        </tbody>\r\n      </table>\r\n    </section>\r\n    \r\n  </main>\r\n  <script>\r\n    $(document).ready(function() {\r\n      // Function to update the user greeting\r\n      function updateUserGreeting(firstName) {\r\n        $(\"#user-greeting\").text(`Welcome, ${firstName}!`);\r\n      }\r\n\r\n      // Function to format date from yyyy-mm-dd to dd-mm-yyyy\r\n      function formatDate(dateString) {\r\n        if (!dateString) return null;\r\n        var parts = dateString.split(\"-\");\r\n        return parts[2] + \"-\" + parts[1] + \"-\" + parts[0];\r\n      }\r\n\r\n      // Function to fetch and populate table data\r\n      function fetchDataAndPopulateTable(url, fields, tbodyId) {\r\n        $.ajax({\r\n          url: url,\r\n          data: { fields: JSON.stringify(fields) },\r\n          method: 'GET',\r\n          dataType: 'json',\r\n          success: function(response) {\r\n            console.log('Response:', response);\r\n            var tbody = $(\"#\" + tbodyId);\r\n            tbody.empty(); // Clear existing rows\r\n\r\n            if(response.data) {\r\n              $.each(response.data, function(index, item) {\r\n                console.log('Item:', item);\r\n                var row = \"<tr>\";\r\n                row += \"<td>\" + (item.name || 'N/A') + \"</td>\";\r\n                row += \"<td>\" + (item.customer_id || 'N/A') + \"</td>\";\r\n                row += \"<td>\" + (item.bike_id || 'N/A') + \"</td>\";\r\n                row += \"<td>\" + (item.service_type || 'N/A') + \"</td>\";\r\n                row += \"<td>\" + (formatDate(item.service_date) || 'N/A') + \"</td>\";\r\n                row += \"<td>\" + (item.status || 'N/A') + \"</td>\";\r\n                row += \"<td>\" + (item.total_cost || 'N/A') + \"</td>\";\r\n                row += \"</tr>\";\r\n                tbody.append(row);\r\n              });\r\n            } else {\r\n              var row = \"<tr><td colspan='7'>No data found</td></tr>\";\r\n              tbody.append(row);\r\n            }\r\n          },\r\n          error: function(xhr, status, error) {\r\n            console.error('Error:', status, error);\r\n            var tbody = $(\"#\" + tbodyId);\r\n            var row = \"<tr><td colspan='7'>Failed to load data</td></tr>\";\r\n            tbody.append(row);\r\n          }\r\n        });\r\n      }\r\n\r\n      // Fetch session data and user details\r\n      fetch('http://localhost:8000/api/method/frappe.auth.get_logged_user')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n          if (data.message) {\r\n            const userEmail = data.message;\r\n\r\n            // Fetch user details using the email\r\n            fetch(`http://localhost:8000/api/resource/User/${userEmail}`)\r\n              .then(response => response.json())\r\n              .then(userData => {\r\n                if (userData && userData.data && userData.data.first_name) {\r\n                  const firstName = userData.data.first_name;\r\n                  // Update the greeting in the navbar\r\n                  updateUserGreeting(firstName);\r\n                } else {\r\n                  console.error('First name not found in user data');\r\n                }\r\n              })\r\n              .catch(error => {\r\n                console.error('Error fetching user details:', error);\r\n              });\r\n          } else {\r\n            console.error('No logged user found');\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.error('Error fetching session data:', error);\r\n        });\r\n\r\n      // Fields to be fetched\r\n      var fields = [\"name\", \"customer_id\", \"bike_id\", \"service_type\", \"service_date\", \"status\", \"total_cost\"];\r\n\r\n      // Get today's date in the format yyyy-mm-dd\r\n      var today = new Date().toISOString().split('T')[0];\r\n\r\n      // Fetch and populate today's bookings\r\n      fetchDataAndPopulateTable(\"http://localhost:8000/api/resource/Service_booking?filters=\" + encodeURIComponent('[[\"service_date\", \"=\", \"' + today + '\"]]'), fields, \"today-bookings-body\");\r\n\r\n      // Fetch and populate pending services\r\n      fetchDataAndPopulateTable(\"http://localhost:8000/api/resource/Service_booking?filters=\" + encodeURIComponent('[[\"status\", \"=\", \"Pending\"]]'), fields, \"pending-services-body\");\r\n\r\n      // Fetch and populate completed services\r\n      fetchDataAndPopulateTable(\"http://localhost:8000/api/resource/Service_booking?filters=\" + encodeURIComponent('[[\"status\", \"=\", \"Completed\"]]'), fields, \"completed-services-body\");\r\n\r\n      // Fetch and populate upcoming bookings for future dates only\r\n      //fetchDataAndPopulateTable(\"http://localhost:8000/api/resource/Service_booking?filters=\" + encodeURIComponent('[[\"service_date\", \">\", \"' + today + '\"]]'), fields, \"upcoming-bookings-body\");\r\n\r\n      // Logout functionality\r\n      $(\"#logout-button\").on(\"click\", function() {\r\n        fetch(\"http://localhost:8000/api/method/logout\", {\r\n          method: \"POST\",\r\n          credentials: \"include\",\r\n        })\r\n        .then(response => {\r\n          console.log(\"Logout response:\", response);\r\n          if (response.ok) {\r\n            window.location.href = \"http://localhost:8000/login_page\";\r\n          } else {\r\n            console.error(\"Failed to log out\");\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.error(\"Logout error:\", error);\r\n        });\r\n      });\r\n    });\r\n  </script>\r\n</body>\r\n</html>\r\n",
  "main_section_md": null,
  "meta_description": null,
  "meta_image": null,
  "meta_title": null,
  "modified": "2024-06-10 08:02:22.863632",
  "module": null,
  "name": "admin-page",
  "page_blocks": [],
  "published": 1,
  "route": "admin_page",
  "show_sidebar": 0,
  "show_title": 0,
  "slideshow": null,
  "start_date": null,
  "text_align": "Left",
  "title": "Admin_page",
  "website_sidebar": null
 }
]